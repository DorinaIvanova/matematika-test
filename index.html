<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåü –ü–∞–∑–∏—Ç–µ–ª–∏—Ç–µ –Ω–∞ –ß–∏—Å–ª–∞—Ç–∞ üåü</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comfortaa:wght@700&display=swap');
        body { font-family: 'Comfortaa', cursive; background: #fff5f5; padding: 10px; color: #333; }
        .main-container { max-width: 900px; background: white; margin: auto; padding: 25px; border-radius: 50px; border: 10px solid #ffcc00; box-shadow: 0 15px 0 #ff9900; }
        .title-box { text-align: center; background: linear-gradient(45deg, #ff0066, #ffcc00); color: white; padding: 20px; border-radius: 30px; margin-bottom: 20px; }
        .name-section { text-align: center; margin-bottom: 25px; }
        .name-section input { padding: 12px; border-radius: 15px; border: 4px solid #ff0066; font-size: 1.3rem; width: 70%; text-align: center; }
        .card { padding: 20px; border-radius: 35px; margin-bottom: 30px; border: 6px solid; }
        .card-1 { background: #e3f2fd; border-color: #2196f3; }
        .card-3 { background: #f3e5f5; border-color: #9c27b0; }
        .card-4 { background: #e0f7fa; border-color: #00bcd4; }
        .card-5 { background: #e8f5e9; border-color: #4caf50; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .task-unit { background: white; padding: 15px; border-radius: 25px; text-align: center; border: 2px solid #ddd; }
        .math-text { font-size: 1.8rem; font-weight: bold; display: block; margin-bottom: 10px; }
        .empty-box { display: inline-block; width: 45px; height: 45px; border: 3px solid #ff9900; border-radius: 8px; vertical-align: middle; }
        .opts { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; }
        .btn-opt { padding: 8px 15px; font-size: 1.2rem; border-radius: 12px; border: 3px solid #ddd; background: white; cursor: pointer; transition: 0.2s; }
        .btn-correct { background: #4caf50 !important; color: white !important; border-color: #2e7d32 !important; }
        .btn-wrong { background: #f44336 !important; color: white !important; border-color: #c62828 !important; }
        .locked { pointer-events: none; }
        .castle-img { width: 100%; max-width: 380px; border-radius: 25px; border: 8px solid #4caf50; margin: 15px auto; display: block; }
        .finish-button { background: #ff0066; color: white; border: none; padding: 25px; width: 100%; font-size: 2rem; border-radius: 40px; cursor: pointer; box-shadow: 0 10px 0 #8e0036; margin-top: 20px; }
        #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); flex-direction: column; align-items: center; justify-content: center; z-index: 9999; text-align: center; color: white; }
    </style>
</head>
<body>

<div class="main-container">
    <div class="title-box"><h1>üåü –ü–ê–ó–ò–¢–ï–õ–ò–¢–ï –ù–ê –ß–ò–°–õ–ê–¢–ê üåü</h1></div>
    <div class="name-section"><input type="text" id="p_name" placeholder="–¢–≤–æ–µ—Ç–æ –∏–º–µ —Ç—É–∫"></div>

    <div class="card card-1">
        <h2>–ó–∞–¥. 1: üöÄ –†–∞–∫–µ—Ç–∏ –∫—ä–º –°–ª—ä–Ω—Ü–µ—Ç–æ</h2>
        <div class="grid">
            <div class="task-unit"><span class="math-text">12 + 4</span><div class="opts" data-id="q1"><button class="btn-opt" onclick="chk(this, 16, 'q1')">15</button><button class="btn-opt" onclick="chk(this, 16, 'q1')">16</button><button class="btn-opt" onclick="chk(this, 16, 'q1')">17</button></div></div>
            <div class="task-unit"><span class="math-text">5 + 5</span><div class="opts" data-id="q2"><button class="btn-opt" onclick="chk(this, 10, 'q2')">10</button><button class="btn-opt" onclick="chk(this, 10, 'q2')">9</button><button class="btn-opt" onclick="chk(this, 10, 'q2')">11</button></div></div>
        </div>
    </div>

    <div class="card card-3">
        <h2>–ó–∞–¥. 3: üê∏ –ñ–∞–±–µ—à–∫–∏ —Å–∫–æ–∫</h2>
        <div class="grid">
            <div class="task-unit"><span class="math-text">9 + 5</span><div class="opts" data-id="q3"><button class="btn-opt" onclick="chk(this, 14, 'q3')">14</button><button class="btn-opt" onclick="chk(this, 14, 'q3')">13</button><button class="btn-opt" onclick="chk(this, 14, 'q3')">15</button></div></div>
            <div class="task-unit"><span class="math-text">8 + 4</span><div class="opts" data-id="q4"><button class="btn-opt" onclick="chk(this, 12, 'q4')">11</button><button class="btn-opt" onclick="chk(this, 12, 'q4')">13</button><button class="btn-opt" onclick="chk(this, 12, 'q4')">12</button></div></div>
        </div>
    </div>

    <div class="card card-4">
        <h2>–ó–∞–¥. 5 –∏ 6: üêä –ö—Ä–æ–∫–æ–¥–∏–ª –∏ –°—Ä–∞–≤–Ω—è–≤–∞–Ω–µ</h2>
        <div class="grid">
            <div class="task-unit"><span class="math-text">12 <div class="empty-box"></div> 18</span><div class="opts" data-id="s1"><button class="btn-opt" onclick="chkS(this, '<', 's1')">&lt;</button><button class="btn-opt" onclick="chkS(this, '<', 's1')">&gt;</button><button class="btn-opt" onclick="chkS(this, '<', 's1')">=</button></div></div>
            <div class="task-unit"><span class="math-text">15 <div class="empty-box"></div> 15</span><div class="opts" data-id="s2"><button class="btn-opt" onclick="chkS(this, '=', 's2')">&gt;</button><button class="btn-opt" onclick="chkS(this, '=', 's2')">=</button><button class="btn-opt" onclick="chkS(this, '=', 's2')">&lt;</button></div></div>
            <div class="task-unit"><span class="math-text">12 + 5 <div class="empty-box"></div> 18</span><div class="opts" data-id="s3"><button class="btn-opt" onclick="chkS(this, '<', 's3')">=</button><button class="btn-opt" onclick="chkS(this, '<', 's3')">&lt;</button><button class="btn-opt" onclick="chkS(this, '<', 's3')">&gt;</button></div></div>
            <div class="task-unit"><span class="math-text">11 - 2 <div class="empty-box"></div> 9</span><div class="opts" data-id="s4"><button class="btn-opt" onclick="chkS(this, '=', 's4')">=</button><button class="btn-opt" onclick="chkS(this, '=', 's4')">&lt;</button><button class="btn-opt" onclick="chkS(this, '=', 's4')">&gt;</button></div></div>
        </div>
    </div>

    <div class="card card-5">
        <h2>–ó–∞–¥. 7: üè∞ –ì–µ–æ–º–µ—Ç—Ä–∏—á–µ–Ω –∑–∞–º—ä–∫</h2>
        <img src="image.jpg" alt="–ó–∞–º—ä–∫" class="castle-img">
        <div class="grid">
            <div class="task-unit"><span>–ö—Ä—ä–≥–æ–≤–µ?</span><div class="opts" data-id="g1"><button class="btn-opt" onclick="chk(this, 4, 'g1')">4</button><button class="btn-opt" onclick="chk(this, 4, 'g1')">3</button><button class="btn-opt" onclick="chk(this, 4, 'g1')">5</button></div></div>
            <div class="task-unit"><span>–ü—Ä–∞–≤–æ—ä–≥—ä–ª–Ω–∏—Ü–∏?</span><div class="opts" data-id="g2"><button class="btn-opt" onclick="chk(this, 3, 'g2')">4</button><button class="btn-opt" onclick="chk(this, 3, 'g2')">3</button><button class="btn-opt" onclick="chk(this, 3, 'g2')">5</button></div></div>
        </div>
    </div>

    <button class="finish-button" onclick="finish()">–ü–†–ï–î–ê–ô –ú–ò–°–ò–Ø–¢–ê! üöÄ</button>
</div>

<div id="overlay">
    <div style="background: white; color: #333; padding: 40px; border-radius: 40px;">
        <h1>–ë–†–ê–í–û! üåü</h1>
        <p id="res-text" style="font-size: 1.5rem;"></p>
        <p>–†–µ–∑—É–ª—Ç–∞—Ç—ä—Ç —Ç–∏ –µ –∏–∑–ø—Ä–∞—Ç–µ–Ω –Ω–∞ –≥–æ—Å–ø–æ–∂–∞—Ç–∞!</p>
        <button onclick="location.reload()" style="padding: 15px 30px; background: #4caf50; color: white; border: none; border-radius: 20px; cursor: pointer;">–ù–û–í–ê –ò–ì–†–ê</button>
    </div>
</div>

<script>
    let scores = {};
    let answeredGroups = {};

    function chk(btn, ans, id) {
        if (answeredGroups[id]) return;
        answeredGroups[id] = true;
        btn.parentElement.querySelectorAll('.btn-opt').forEach(b => {
            b.classList.add('locked');
            if (parseInt(b.innerText) === ans) b.classList.add('btn-correct');
        });
        if (parseInt(btn.innerText) === ans) { scores[id] = 1; } else { btn.classList.add('btn-wrong'); scores[id] = 0; }
    }

    function chkS(btn, ans, id) {
        if (answeredGroups[id]) return;
        answeredGroups[id] = true;
        btn.parentElement.querySelectorAll('.btn-opt').forEach(b => {
            b.classList.add('locked');
            if (b.innerText === ans) b.classList.add('btn-correct');
        });
        if (btn.innerText === ans) { scores[id] = 1; } else { btn.classList.add('btn-wrong'); scores[id] = 0; }
    }

    function finish() {
        let name = document.getElementById('p_name').value || "–ê–Ω–æ–Ω–∏–º–µ–Ω";
        let pts = Object.values(scores).reduce((a, b) => a + b, 0);
        let total = Object.keys(answeredGroups).length;

        // –ò–ó–ü–†–ê–©–ê–ù–ï –ö–™–ú –¢–ê–ë–õ–ò–¶–ê (Formspree)
        // –°–ª–æ–∂–∏ —Ç–≤–æ—è –ª–∏–Ω–∫ —Ç—É–∫:
        fetch("https://formspree.io/f/–¢–í–û–Ø_–õ–ò–ù–ö_–¢–£–ö", {
            method: "POST",
            body: JSON.stringify({ –ò–º–µ: name, –¢–æ—á–∫–∏: pts + "/" + total }),
            headers: { 'Content-Type': 'application/json' }
        });

        document.getElementById('overlay').style.display = 'flex';
        document.getElementById('res-text').innerText = name + ", —Ç–∏ —Å—ä–±—Ä–∞ " + pts + " –æ—Ç " + total + " —Ç–æ—á–∫–∏!";
        confetti({ particleCount: 300, spread: 100, origin: { y: 0.6 } });
    }
</script>
</body>
</html>
